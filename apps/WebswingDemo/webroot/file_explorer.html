<!DOCTYPE html>
<html class="ws-fullscreen" lang="en">

<head>
    <title>Webswing</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0">
</head>

<body>

	<div>
		<button id="fc-download" onclick="window.parent.webswingInstance0.getFilesManager().downloadSelectedFile()">Download</button>
		<button id="fc-upload" onclick="document.querySelector('#fc-upload-input').click()">Upload</button>
		<button id="fc-delete" onclick="window.parent.webswingInstance0.getFilesManager().deleteSelectedFile()">Delete</button>
		<button id="fc-folder" onclick="createNewFolder()">New folder</button>
		<input id="fc-folder-name" type="text" placeholder="folder name">
		<input style="display: none;" type="file" id="fc-upload-input" name="files" onchange="handleUpload(event)">
		
		<br />
		<progress id="fc-progress" value="0" max="100" style="display: none;"></progress>
		<br />
		<div id="fc-errors" style="color: red;"></div>
	</div>

	<script type="text/javascript">
		function handleUpload(e) {
			var files;
	
	        if (e.type === 'drop') {
	            files = [...e.dataTransfer.files];
	        } else {
	            files = e.target?.files;
	        }
	
	        for (const file of files) {
	        	window.parent.webswingInstance0.getFilesManager().uploadFile(file);
	        }
	
	        e.target.value = "";
		}
		
		function createNewFolder() {
			const name = document.querySelector("#fc-folder-name").value;
			if (name) {
				window.parent.webswingInstance0.performAction({actionName: 'file_explorer_new_folder', data: name})
			}
		}
	</script>
</body>
</html>
